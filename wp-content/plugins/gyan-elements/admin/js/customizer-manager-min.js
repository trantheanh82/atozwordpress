!function(n){GyanCustomizerManager={init:function(){this._bind(),this._CustomizerOptions()},_bind:function(){n(document).on("click",".gyan-install-recommended-plugin",GyanCustomizerManager._installNow),n(document).on("click",".gyan-activate-recommended-plugin",GyanCustomizerManager._activatePlugin),n(document).on("click",".gyan-deactivate-recommended-plugin",GyanCustomizerManager._deactivatePlugin),n(document).on("wp-plugin-install-success",GyanCustomizerManager._activatePlugin),n(document).on("wp-plugin-install-error",GyanCustomizerManager._installError),n(document).on("wp-plugin-installing",GyanCustomizerManager._pluginInstalling)},_pluginInstalling:function(n,a){n.preventDefault();var e=a.slug,t=jQuery(".gyan-install-recommended-plugin"),i=gyanPluginInstall.recommendedPluiginActivatingText;t.each(function(n,a){(a=jQuery(a)).data("slug")===e&&(a.addClass("updating-message"),a.html(i))})},_activatePlugin:function(a,e){a.preventDefault();var t=jQuery(a.target);if(void 0===(i=t.data("init"))){t=jQuery(".gyan-install-recommended-plugin[data-slug="+e.slug+"]");e.slug}else i;var i=t.data("init"),l=gyanPluginInstall.recommendedPluiginActivatingText,s=t.data("settings-link"),u=gyanPluginInstall.recommendedPluiginSettingsText,g=gyanPluginInstall.recommendedPluiginDeactivateText,d=gyanPluginInstall.afterPluginActivationText,o=(gyanPluginInstall.gyanSitesLink,gyanPluginInstall.gyanPluginManagerNonce);t.removeClass("install-now installed button-disabled updated-message").addClass("updating-message").html(l),setTimeout(function(){n.ajax({url:gyanPluginInstall.ajaxUrl,type:"POST",data:{action:"gyan-sites-plugin-activate",nonce:o,init:i}}).done(function(a){if(a.success){var e='<a href="#" class="gyan-deactivate-recommended-plugin button button-secondary" data-init="'+i+'" data-settings-link="'+s+'" data-settings-link-text="'+g+'" aria-label="'+g+'">'+g+"</a>";e+="string"==typeof s&&"undefined"!=s?'<a href="'+s+'" aria-label="'+u+'">'+u+" </a>":"",e+=void 0===typeof s&&null!=s?'<a href="'+s+'" aria-label="'+u+'">'+u+" </a>":"",t.removeClass("gyan-activate-recommended-plugin gyan-install-recommended-plugin button button-primary install-now activate-now updating-message"),t.parent(".gyan-recommended-plugin").addClass("active"),t.parents(".gyan-recommended-plugin").html(e),n(".gyan-customizer-ie-path").hide(),n(".gyanAfterPluginActivationText").show(),n(".gyanAfterPluginActivationText").html(d)}else t.removeClass("updating-message")})},1200)},_deactivatePlugin:function(a,e){a.preventDefault();var t=jQuery(a.target);if(void 0===(i=t.data("init")))t=jQuery(".gyan-install-recommended-plugin[data-slug="+e.slug+"]");var i=t.data("init"),l=t.data("deactivating-text")||gyanPluginInstall.recommendedPluiginDeactivatingText,s=t.data("settings-link"),u=gyanPluginInstall.recommendedPluiginActivateText,g=gyanPluginInstall.gyanPluginManagerNonce;t.removeClass("install-now installed button-disabled updated-message").addClass("updating-message").html(l),setTimeout(function(){n.ajax({url:gyanPluginInstall.ajaxUrl,type:"POST",data:{action:"gyan-sites-plugin-deactivate",nonce:g,init:i}}).done(function(n){if(n.success){var a='<a href="#" class="gyan-activate-recommended-plugin button button-primary" data-init="'+i+'" data-settings-link="'+s+'" data-settings-link-text="'+u+'" aria-label="'+u+'">'+u+"</a>";t.removeClass("gyan-activate-recommended-plugin gyan-install-recommended-plugin button button-secondary install-now activate-now updating-message"),t.parent(".gyan-recommended-plugin").removeClass("active"),t.parents(".gyan-recommended-plugin").html(a)}else t.removeClass("updating-message")})},1200)},_installNow:function(a){a.preventDefault();var e=jQuery(a.target),t=jQuery(document);e.hasClass("updating-message")||e.hasClass("button-disabled")||(wp.updates.shouldRequestFilesystemCredentials&&!wp.updates.ajaxLocked&&(wp.updates.requestFilesystemCredentials(a),t.on("credential-modal-cancel",function(){n(".gyan-install-recommended-plugin.updating-message").addClass("gyan-activate-recommended-plugin").removeClass("updating-message gyan-install-recommended-plugin").text(wp.updates.l10n.installNow),wp.a11y.speak(wp.updates.l10n.updateCancel,"polite")})),wp.updates.installPlugin({slug:e.data("slug")}))},_installError:function(n,a){jQuery(".gyan-install-recommended-plugin").removeClass("button-primary").addClass("disabled").html(wp.updates.l10n.installFailedShort)},_CustomizerOptions:function(a){n(".gyan-customizer-check-all").on("click",function(){return n(".gyan-customizer-editor-checkbox").each(function(){this.checked=!0}),!1}),n(".gyan-customizer-uncheck-all").on("click",function(){return n(".gyan-customizer-editor-checkbox").each(function(){this.checked=!1}),!1})}},n(function(){GyanCustomizerManager.init()})}(jQuery);